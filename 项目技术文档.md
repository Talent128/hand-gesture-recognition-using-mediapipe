# æ‰‹åŠ¿è¯†åˆ«ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£

åŸºäº MediaPipe å’Œæ·±åº¦å­¦ä¹ çš„å®æ—¶æ‰‹åŠ¿è¯†åˆ«é¡¹ç›®

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
3. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
4. [æ ¸å¿ƒæ–‡ä»¶è¯´æ˜](#æ ¸å¿ƒæ–‡ä»¶è¯´æ˜)
5. [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
6. [æ¨¡å‹è¯¦è§£](#æ¨¡å‹è¯¦è§£)
7. [æ•°æ®æµç¨‹](#æ•°æ®æµç¨‹)
8. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
9. [æ¨¡å‹è®­ç»ƒ](#æ¨¡å‹è®­ç»ƒ)
10. [æ‰‹åŠ¿ç±»åˆ«](#æ‰‹åŠ¿ç±»åˆ«)
11. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªå®æ—¶æ‰‹åŠ¿è¯†åˆ«ç³»ç»Ÿï¼Œèƒ½å¤Ÿè¯†åˆ«**é™æ€æ‰‹åŠ¿**ï¼ˆæ‰‹çš„å½¢çŠ¶ï¼‰å’Œ**åŠ¨æ€æ‰‹åŠ¿**ï¼ˆæ‰‹æŒ‡è¿åŠ¨è½¨è¿¹ï¼‰ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **é™æ€æ‰‹åŠ¿è¯†åˆ«**ï¼šè¯†åˆ«æ‰‹çš„å½¢çŠ¶ï¼ˆå¼ å¼€ã€æ¡æ‹³ã€æŒ‡å‘ç­‰ï¼‰
- âœ… **åŠ¨æ€æ‰‹åŠ¿è¯†åˆ«**ï¼šè¯†åˆ«æ‰‹æŒ‡ç§»åŠ¨è½¨è¿¹ï¼ˆé¡ºæ—¶é’ˆã€é€†æ—¶é’ˆã€åœæ­¢ã€ç§»åŠ¨ï¼‰
- âœ… **å®æ—¶å¤„ç†**ï¼šåŸºäºæ‘„åƒå¤´çš„å®æ—¶è¯†åˆ«
- âœ… **è®­ç»ƒæ•°æ®é‡‡é›†**ï¼šå¯ä»¥å®æ—¶é‡‡é›†æ–°çš„è®­ç»ƒæ ·æœ¬
- âœ… **è½»é‡çº§æ¨¡å‹**ï¼šä½¿ç”¨ TensorFlow Lite é‡åŒ–æ¨¡å‹ï¼Œæ¨ç†é€Ÿåº¦å¿«

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ‘„åƒå¤´è¾“å…¥                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MediaPipe Hands æ£€æµ‹                            â”‚
â”‚            (æ£€æµ‹æ‰‹éƒ¨ä½ç½®å’Œ21ä¸ªå…³é”®ç‚¹)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â–¼                  â–¼                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  å…³é”®ç‚¹åæ ‡   â”‚   â”‚  æŒ‡å°–åæ ‡     â”‚    â”‚  å…³é”®ç‚¹é¢„å¤„ç† â”‚
            â”‚  (21ä¸ªç‚¹)    â”‚   â”‚  (ç´¢å¼•æŒ‡å°–)   â”‚    â”‚  (å½’ä¸€åŒ–)     â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                  â”‚                    â”‚
                   â–¼                  â–¼                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
          â”‚ é™æ€æ‰‹åŠ¿åˆ†ç±»å™¨â”‚   â”‚è½¨è¿¹å†å²é˜Ÿåˆ—   â”‚            â”‚
          â”‚ (MLPæ¨¡å‹)    â”‚   â”‚ (16ä¸ªæ—¶é—´æ­¥)  â”‚            â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                 â”‚                  â”‚                    â”‚
                 â”‚                  â–¼                    â”‚
                 â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
                 â”‚          â”‚åŠ¨æ€æ‰‹åŠ¿åˆ†ç±»å™¨ â”‚            â”‚
                 â”‚          â”‚(MLP/LSTM)    â”‚            â”‚
                 â”‚          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                 â”‚                 â”‚                    â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   ç»“æœå¯è§†åŒ–æ˜¾ç¤º   â”‚
                 â”‚ (æ‰‹åŠ¿ç±»åˆ«+è½¨è¿¹çº¿) â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Python** | 3.8+ | ç¼–ç¨‹è¯­è¨€ |
| **MediaPipe** | 0.10.21 | æ‰‹éƒ¨å…³é”®ç‚¹æ£€æµ‹ |
| **TensorFlow** | 2.17.0 | æ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒ |
| **OpenCV** | 4.10.0.84 | å›¾åƒå¤„ç†å’Œå¯è§†åŒ– |
| **scikit-learn** | 1.5.2 | æ•°æ®åˆ’åˆ†å’Œæ¨¡å‹è¯„ä¼° |
| **NumPy** | - | æ•°å€¼è®¡ç®— |
| **Matplotlib** | 3.9.2 | ç»˜å›¾å’Œå¯è§†åŒ– |

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 1. **app.py** - ä¸»ç¨‹åºï¼ˆ545è¡Œï¼‰

**ä½œç”¨**ï¼šå®æ—¶æ‰‹åŠ¿è¯†åˆ«çš„ä¸»åº”ç”¨ç¨‹åº

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- æ‘„åƒå¤´åˆå§‹åŒ–å’Œå›¾åƒé‡‡é›†
- è°ƒç”¨ MediaPipe è¿›è¡Œæ‰‹éƒ¨æ£€æµ‹
- è°ƒç”¨ä¸¤ä¸ªåˆ†ç±»å™¨è¿›è¡Œæ‰‹åŠ¿è¯†åˆ«
- å®æ—¶å¯è§†åŒ–æ˜¾ç¤ºç»“æœ
- æ”¯æŒè®­ç»ƒæ•°æ®é‡‡é›†æ¨¡å¼

**å…³é”®å‡½æ•°**ï¼š

| å‡½æ•°å | åŠŸèƒ½ | è¾“å…¥ | è¾“å‡º |
|--------|------|------|------|
| `main()` | ä¸»å¾ªç¯ | æ—  | æ—  |
| `get_args()` | è§£æå‘½ä»¤è¡Œå‚æ•° | å‘½ä»¤è¡Œå‚æ•° | argså¯¹è±¡ |
| `calc_landmark_list()` | æå–21ä¸ªå…³é”®ç‚¹åæ ‡ | å›¾åƒ, MediaPipeç»“æœ | å…³é”®ç‚¹åˆ—è¡¨ |
| `pre_process_landmark()` | é¢„å¤„ç†å…³é”®ç‚¹ï¼ˆå½’ä¸€åŒ–ï¼‰ | å…³é”®ç‚¹åˆ—è¡¨ | å½’ä¸€åŒ–åçš„åˆ—è¡¨ |
| `pre_process_point_history()` | é¢„å¤„ç†è½¨è¿¹å†å² | å›¾åƒ, è½¨è¿¹é˜Ÿåˆ— | å½’ä¸€åŒ–åçš„è½¨è¿¹ |
| `logging_csv()` | ä¿å­˜è®­ç»ƒæ•°æ®åˆ°CSV | æ¨¡å¼, æ•°æ® | æ—  |
| `draw_landmarks()` | ç»˜åˆ¶æ‰‹éƒ¨éª¨æ¶ | å›¾åƒ, å…³é”®ç‚¹ | ç»˜åˆ¶åçš„å›¾åƒ |

**æ“ä½œæ¨¡å¼**ï¼š

```python
# è¿è¡Œæ¨¡å¼åˆ‡æ¢ï¼ˆæŒ‰é”®æ§åˆ¶ï¼‰
Mode 0 (æŒ‰né”®): æ­£å¸¸è¯†åˆ«æ¨¡å¼
Mode 1 (æŒ‰ké”®): é‡‡é›†é™æ€æ‰‹åŠ¿æ•°æ®ï¼ˆæŒ‰0-9é€‰æ‹©ç±»åˆ«ï¼‰
Mode 2 (æŒ‰hé”®): é‡‡é›†åŠ¨æ€è½¨è¿¹æ•°æ®ï¼ˆæŒ‰0-9é€‰æ‹©ç±»åˆ«ï¼‰
```

**æ‰‹éƒ¨å…³é”®ç‚¹ç´¢å¼•**ï¼š
```
MediaPipe 21ä¸ªå…³é”®ç‚¹å¸ƒå±€ï¼š
         8   12  16  20     (æŒ‡å°–)
         |   |   |   |
         7   11  15  19     (ç¬¬1å…³èŠ‚)
         |   |   |   |
         6   10  14  18     (ç¬¬2å…³èŠ‚)
         |   |   |   |
    4    5---9---13--17     (æŒ‡æ ¹)
    |   /
    3  /
    | /
    2
    |
    1
    |
    0 (æ‰‹è…•)
    
ç´¢å¼•è¯´æ˜ï¼š
0-1: æ‰‹è…•
2-4: å¤§æ‹‡æŒ‡
5-8: é£ŸæŒ‡
9-12: ä¸­æŒ‡
13-16: æ— åæŒ‡
17-20: å°æŒ‡
```

---

### 2. **model/keypoint_classifier/keypoint_classifier.py** - é™æ€æ‰‹åŠ¿åˆ†ç±»å™¨ï¼ˆ100è¡Œï¼‰

**ä½œç”¨**ï¼šåŸºäºæ‰‹éƒ¨21ä¸ªå…³é”®ç‚¹è¿›è¡Œé™æ€æ‰‹åŠ¿åˆ†ç±»

**ç±»è¯´æ˜**ï¼š

```python
class KeyPointClassifier(object):
    """
    é™æ€æ‰‹åŠ¿åˆ†ç±»å™¨
    
    è¾“å…¥ï¼š42ç»´å‘é‡ï¼ˆ21ä¸ªå…³é”®ç‚¹ Ã— 2ä¸ªåæ ‡ï¼‰
    è¾“å‡ºï¼šæ‰‹åŠ¿ç±»åˆ«ç¼–å·ï¼ˆ0, 1, 2, ...ï¼‰
    
    æ¨¡å‹ï¼šTensorFlow Lite é‡åŒ–æ¨¡å‹
    """
    
    def __init__(self, model_path, num_threads=1):
        """
        åˆå§‹åŒ–åˆ†ç±»å™¨
        - åŠ è½½ TFLite æ¨¡å‹
        - åˆ†é…å¼ é‡ç¼“å†²åŒº
        """
    
    def __call__(self, landmark_list):
        """
        æ‰§è¡Œæ¨ç†
        - è¾“å…¥ï¼šé¢„å¤„ç†åçš„å…³é”®ç‚¹åæ ‡
        - è¿”å›ï¼šé¢„æµ‹çš„ç±»åˆ«ç¼–å·
        """
```

**æ•°æ®å¤„ç†æµç¨‹**ï¼š

```
åŸå§‹å…³é”®ç‚¹ (21ä¸ªç‚¹ï¼Œæ¯ä¸ªç‚¹(x,y))
    â†“
è½¬æ¢ä¸ºç›¸å¯¹åæ ‡ï¼ˆç›¸å¯¹äºæ‰‹è…•ç‚¹ï¼‰
    â†“
å½’ä¸€åŒ–ï¼ˆé™¤ä»¥æœ€å¤§å€¼ï¼‰
    â†“
å±•å¹³ä¸º42ç»´å‘é‡
    â†“
è¾“å…¥åˆ°æ¨¡å‹
    â†“
Softmaxè¾“å‡ºæ¦‚ç‡åˆ†å¸ƒ
    â†“
Argmaxå¾—åˆ°ç±»åˆ«ç¼–å·
```

---

### 3. **model/point_history_classifier/point_history_classifier.py** - åŠ¨æ€æ‰‹åŠ¿åˆ†ç±»å™¨ï¼ˆ114è¡Œï¼‰

**ä½œç”¨**ï¼šåŸºäºæŒ‡å°–ç§»åŠ¨è½¨è¿¹è¿›è¡ŒåŠ¨æ€æ‰‹åŠ¿åˆ†ç±»

**ç±»è¯´æ˜**ï¼š

```python
class PointHistoryClassifier(object):
    """
    åŠ¨æ€æ‰‹åŠ¿åˆ†ç±»å™¨
    
    è¾“å…¥ï¼š32ç»´å‘é‡ï¼ˆ16ä¸ªæ—¶é—´æ­¥ Ã— 2ä¸ªåæ ‡ï¼‰
    è¾“å‡ºï¼šè½¨è¿¹ç±»åˆ«ç¼–å·ï¼ˆ0, 1, 2, 3ï¼‰
    
    ç‰¹ç‚¹ï¼šæ”¯æŒç½®ä¿¡åº¦é˜ˆå€¼è¿‡æ»¤
    """
    
    def __init__(self, model_path, score_th=0.5, invalid_value=0, num_threads=1):
        """
        åˆå§‹åŒ–åˆ†ç±»å™¨
        - åŠ è½½ TFLite æ¨¡å‹
        - è®¾ç½®ç½®ä¿¡åº¦é˜ˆå€¼
        """
    
    def __call__(self, point_history):
        """
        æ‰§è¡Œæ¨ç†
        - è¾“å…¥ï¼šé¢„å¤„ç†åçš„è½¨è¿¹åºåˆ—
        - è¿”å›ï¼šé¢„æµ‹çš„ç±»åˆ«ç¼–å·ï¼ˆä½ç½®ä¿¡åº¦è¿”å›invalid_valueï¼‰
        """
```

**è½¨è¿¹å¤„ç†æµç¨‹**ï¼š

```
å®æ—¶é‡‡é›†æŒ‡å°–åæ ‡ï¼ˆå½“æ£€æµ‹åˆ°"æŒ‡å‘"æ‰‹åŠ¿æ—¶ï¼‰
    â†“
å­˜å…¥å›ºå®šé•¿åº¦é˜Ÿåˆ—ï¼ˆ16ä¸ªæ—¶é—´æ­¥ï¼‰
    â†“
è½¬æ¢ä¸ºç›¸å¯¹åæ ‡ï¼ˆç›¸å¯¹äºç¬¬ä¸€ä¸ªç‚¹ï¼‰
    â†“
å½’ä¸€åŒ–ï¼ˆé™¤ä»¥å›¾åƒå°ºå¯¸ï¼‰
    â†“
å±•å¹³ä¸º32ç»´å‘é‡
    â†“
è¾“å…¥åˆ°æ¨¡å‹
    â†“
Softmaxè¾“å‡ºæ¦‚ç‡åˆ†å¸ƒ
    â†“
æ£€æŸ¥ç½®ä¿¡åº¦é˜ˆå€¼
    â†“
è¿”å›ç±»åˆ«ç¼–å·
```

---

### 4. **keypoint_classification.ipynb** - é™æ€æ‰‹åŠ¿æ¨¡å‹è®­ç»ƒï¼ˆ369è¡Œï¼‰

**ä½œç”¨**ï¼šè®­ç»ƒé™æ€æ‰‹åŠ¿åˆ†ç±»æ¨¡å‹

**è®­ç»ƒæµç¨‹**ï¼š

```python
# 1. å¯¼å…¥åº“å’Œè®¾ç½®
import tensorflow as tf
from sklearn.model_selection import train_test_split

# 2. åŠ è½½è®­ç»ƒæ•°æ®
# CSVæ ¼å¼ï¼š[æ ‡ç­¾, x1, y1, x2, y2, ..., x21, y21]
X_dataset = np.loadtxt('model/keypoint_classifier/keypoint.csv', ...)
y_dataset = np.loadtxt(...)

# 3. åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼ˆ75%:25%ï¼‰
X_train, X_test, y_train, y_test = train_test_split(...)

# 4. æ„å»ºæ¨¡å‹ï¼ˆå…¨è¿æ¥ç¥ç»ç½‘ç»œï¼‰
model = tf.keras.models.Sequential([
    Input(42,),           # è¾“å…¥å±‚ï¼š42ç»´
    Dropout(0.2),         # é˜²æ­¢è¿‡æ‹Ÿåˆ
    Dense(20, relu),      # éšè—å±‚1ï¼š20ä¸ªç¥ç»å…ƒ
    Dropout(0.4),
    Dense(10, relu),      # éšè—å±‚2ï¼š10ä¸ªç¥ç»å…ƒ
    Dense(NUM_CLASSES, softmax)  # è¾“å‡ºå±‚
])

# 5. ç¼–è¯‘æ¨¡å‹
model.compile(
    optimizer='adam',
    loss='sparse_categorical_crossentropy',
    metrics=['accuracy']
)

# 6. è®­ç»ƒæ¨¡å‹
model.fit(
    X_train, y_train,
    epochs=1000,
    batch_size=128,
    validation_data=(X_test, y_test),
    callbacks=[ModelCheckpoint, EarlyStopping]
)

# 7. è½¬æ¢ä¸º TFLite æ ¼å¼ï¼ˆé‡åŒ–ï¼‰
converter = tf.lite.TFLiteConverter.from_keras_model(model)
converter.optimizations = [tf.lite.Optimize.DEFAULT]
tflite_model = converter.convert()
```

**æ¨¡å‹ç»“æ„**ï¼š

```
Layer (type)                Output Shape              Param #
=================================================================
Input                       (None, 42)                0
Dropout (0.2)               (None, 42)                0
Dense (20, ReLU)            (None, 20)                860
Dropout (0.4)               (None, 20)                0
Dense (10, ReLU)            (None, 10)                210
Dense (NUM_CLASSES, Softmax)(None, NUM_CLASSES)       33 (NUM_CLASSES=3)
=================================================================
Total params: 1,103
```

**è¯„ä¼°æ–¹æ³•**ï¼š

1. **å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰**ï¼šåˆ†ç±»æ­£ç¡®çš„æ¯”ä¾‹
2. **æ··æ·†çŸ©é˜µï¼ˆConfusion Matrixï¼‰**ï¼šå±•ç¤ºå„ç±»åˆ«çš„åˆ†ç±»æƒ…å†µ
3. **åˆ†ç±»æŠ¥å‘Šï¼ˆClassification Reportï¼‰**ï¼š
   - Precisionï¼ˆç²¾ç¡®ç‡ï¼‰
   - Recallï¼ˆå¬å›ç‡ï¼‰
   - F1-score

---

### 5. **point_history_classification.ipynb** - åŠ¨æ€æ‰‹åŠ¿æ¨¡å‹è®­ç»ƒï¼ˆ385è¡Œï¼‰

**ä½œç”¨**ï¼šè®­ç»ƒåŠ¨æ€æ‰‹åŠ¿åˆ†ç±»æ¨¡å‹

**è®­ç»ƒæµç¨‹**ï¼š

```python
# 1. è®¾ç½®å‚æ•°
TIME_STEPS = 16  # æ—¶é—´æ­¥é•¿
DIMENSION = 2    # åæ ‡ç»´åº¦
NUM_CLASSES = 4  # ç±»åˆ«æ•°é‡

# 2. åŠ è½½è®­ç»ƒæ•°æ®
# CSVæ ¼å¼ï¼š[æ ‡ç­¾, x1, y1, x2, y2, ..., x16, y16]
X_dataset = np.loadtxt('model/point_history_classifier/point_history.csv', ...)
y_dataset = np.loadtxt(...)

# 3. æ„å»ºæ¨¡å‹ï¼ˆä¸¤ç§é€‰æ‹©ï¼‰
use_lstm = False  # æ˜¯å¦ä½¿ç”¨LSTM

if use_lstm:
    # LSTMæ¨¡å‹ï¼ˆé€‚åˆæ—¶åºæ•°æ®ï¼‰
    model = Sequential([
        Reshape((TIME_STEPS, DIMENSION)),
        LSTM(16),
        Dense(10, relu),
        Dense(NUM_CLASSES, softmax)
    ])
else:
    # å…¨è¿æ¥æ¨¡å‹ï¼ˆæ›´å¿«ï¼‰
    model = Sequential([
        Dense(24, relu),
        Dense(10, relu),
        Dense(NUM_CLASSES, softmax)
    ])

# 4. è®­ç»ƒå’Œè½¬æ¢ä¸ºTFLiteï¼ˆåŒé™æ€æ‰‹åŠ¿ï¼‰
```

**æ¨¡å‹å¯¹æ¯”**ï¼š

| æ¨¡å‹ç±»å‹ | å‚æ•°é‡ | æ¨ç†é€Ÿåº¦ | å‡†ç¡®ç‡ |
|---------|--------|---------|--------|
| MLPï¼ˆå…¨è¿æ¥ï¼‰ | ~1000 | å¿« | è¾ƒé«˜ |
| LSTM | ~3000 | è¾ƒæ…¢ | æ›´é«˜ |

**æ¨è**ï¼šä½¿ç”¨ MLP æ¨¡å‹ï¼Œé€Ÿåº¦æ›´å¿«ä¸”å‡†ç¡®ç‡è¶³å¤Ÿ

---

### 6. **utils/cvfpscalc.py** - FPSè®¡ç®—å·¥å…·ï¼ˆ22è¡Œï¼‰

**ä½œç”¨**ï¼šè®¡ç®—å’Œæ˜¾ç¤ºå®æ—¶å¸§ç‡

```python
class CvFpsCalc(object):
    """
    FPSï¼ˆå¸§ç‡ï¼‰è®¡ç®—å™¨
    
    ä½¿ç”¨æ»‘åŠ¨çª—å£å¹³å‡å¤šå¸§æ—¶é—´ï¼Œå¾—åˆ°å¹³æ»‘çš„FPSå€¼
    """
    
    def __init__(self, buffer_len=1):
        """buffer_len: å¹³æ»‘çª—å£å¤§å°"""
        
    def get(self):
        """è¿”å›å½“å‰FPS"""
```

---

### 7. **é…ç½®æ–‡ä»¶**

#### **model/keypoint_classifier/keypoint_classifier_label.csv**

é™æ€æ‰‹åŠ¿ç±»åˆ«æ ‡ç­¾ï¼š

```csv
Open          # 0: å¼ å¼€æ‰‹æŒ
Close         # 1: æ¡æ‹³
Pointer       # 2: æŒ‡å‘æ‰‹åŠ¿
```

#### **model/point_history_classifier/point_history_classifier_label.csv**

åŠ¨æ€æ‰‹åŠ¿ç±»åˆ«æ ‡ç­¾ï¼š

```csv
Stop                  # 0: åœæ­¢ï¼ˆæ— ç§»åŠ¨ï¼‰
Clockwise             # 1: é¡ºæ—¶é’ˆæ—‹è½¬
Counter Clockwise     # 2: é€†æ—¶é’ˆæ—‹è½¬
Move                  # 3: ç§»åŠ¨
```

---

## ğŸ”„ å·¥ä½œæµç¨‹

### å®æ—¶è¯†åˆ«æµç¨‹

```mermaid
graph TD
    A[å¯åŠ¨ç¨‹åº] --> B[åˆå§‹åŒ–æ‘„åƒå¤´]
    B --> C[åˆå§‹åŒ–MediaPipe]
    C --> D[åŠ è½½ä¸¤ä¸ªåˆ†ç±»å™¨]
    D --> E[è¿›å…¥ä¸»å¾ªç¯]
    E --> F[è¯»å–æ‘„åƒå¤´å¸§]
    F --> G[MediaPipeæ£€æµ‹æ‰‹éƒ¨]
    G --> H{æ£€æµ‹åˆ°æ‰‹ï¼Ÿ}
    H -->|å¦| E
    H -->|æ˜¯| I[æå–21ä¸ªå…³é”®ç‚¹]
    I --> J[é¢„å¤„ç†å…³é”®ç‚¹]
    J --> K[é™æ€æ‰‹åŠ¿åˆ†ç±»]
    K --> L{æ˜¯æŒ‡å‘æ‰‹åŠ¿ï¼Ÿ}
    L -->|æ˜¯| M[è®°å½•æŒ‡å°–åæ ‡]
    L -->|å¦| N[è®°å½•ç©ºåæ ‡]
    M --> O[è½¨è¿¹å†å²é˜Ÿåˆ—]
    N --> O
    O --> P{é˜Ÿåˆ—æ»¡16ä¸ªï¼Ÿ}
    P -->|æ˜¯| Q[åŠ¨æ€æ‰‹åŠ¿åˆ†ç±»]
    P -->|å¦| R[è·³è¿‡åŠ¨æ€åˆ†ç±»]
    Q --> S[å¯è§†åŒ–ç»“æœ]
    R --> S
    S --> T[æ˜¾ç¤ºç”»é¢]
    T --> U{æŒ‰ESCï¼Ÿ}
    U -->|å¦| E
    U -->|æ˜¯| V[ç»“æŸç¨‹åº]
```

### æ•°æ®é‡‡é›†æµç¨‹

```mermaid
graph TD
    A[è¿è¡Œapp.py] --> B[æŒ‰kæˆ–håˆ‡æ¢æ¨¡å¼]
    B --> C{é€‰æ‹©æ¨¡å¼}
    C -->|k| D[é‡‡é›†é™æ€æ‰‹åŠ¿]
    C -->|h| E[é‡‡é›†åŠ¨æ€è½¨è¿¹]
    D --> F[æŒ‰0-9é€‰æ‹©ç±»åˆ«]
    E --> F
    F --> G[åšå‡ºæ‰‹åŠ¿]
    G --> H[æ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°CSV]
    H --> I{ç»§ç»­é‡‡é›†ï¼Ÿ}
    I -->|æ˜¯| G
    I -->|å¦| J[æŒ‰nè¿”å›è¯†åˆ«æ¨¡å¼]
```

---

## ğŸ§  æ¨¡å‹è¯¦è§£

### é™æ€æ‰‹åŠ¿åˆ†ç±»æ¨¡å‹

**è¾“å…¥ç‰¹å¾**ï¼š
- 21ä¸ªå…³é”®ç‚¹çš„x,yåæ ‡
- é¢„å¤„ç†ï¼šç›¸å¯¹åæ ‡ + å½’ä¸€åŒ–
- æœ€ç»ˆè¾“å…¥ï¼š42ç»´å‘é‡

**ç½‘ç»œç»“æ„**ï¼š
```
Input(42) 
  â†“
Dropout(0.2) â”€â”€â†’ é˜²æ­¢è¿‡æ‹Ÿåˆ
  â†“
Dense(20, ReLU) â”€â”€â†’ ç¬¬ä¸€å±‚ç‰¹å¾æå–
  â†“
Dropout(0.4) â”€â”€â†’ æ›´å¼ºçš„æ­£åˆ™åŒ–
  â†“
Dense(10, ReLU) â”€â”€â†’ ç¬¬äºŒå±‚ç‰¹å¾æå–
  â†“
Dense(3, Softmax) â”€â”€â†’ è¾“å‡ºæ¦‚ç‡åˆ†å¸ƒ
```

**è¾“å‡º**ï¼š
- 3ä¸ªç±»åˆ«çš„æ¦‚ç‡åˆ†å¸ƒ
- ä¾‹å¦‚ï¼š[0.1, 0.2, 0.7] è¡¨ç¤ºç¬¬2ç±»æ¦‚ç‡æœ€é«˜

---

### åŠ¨æ€æ‰‹åŠ¿åˆ†ç±»æ¨¡å‹

**è¾“å…¥ç‰¹å¾**ï¼š
- 16ä¸ªæ—¶é—´æ­¥çš„æŒ‡å°–åæ ‡ï¼ˆä»…åœ¨"æŒ‡å‘"æ‰‹åŠ¿æ—¶è®°å½•ï¼‰
- é¢„å¤„ç†ï¼šç›¸å¯¹åæ ‡ + å½’ä¸€åŒ–
- æœ€ç»ˆè¾“å…¥ï¼š32ç»´å‘é‡

**ç½‘ç»œç»“æ„ï¼ˆMLPç‰ˆæœ¬ï¼‰**ï¼š
```
Input(32) 
  â†“
Dropout(0.2)
  â†“
Dense(24, ReLU) â”€â”€â†’ æ—¶åºç‰¹å¾æå–
  â†“
Dropout(0.5)
  â†“
Dense(10, ReLU)
  â†“
Dense(4, Softmax) â”€â”€â†’ è¾“å‡º4ä¸ªç±»åˆ«çš„æ¦‚ç‡
```

**è¾“å‡º**ï¼š
- 4ä¸ªç±»åˆ«çš„æ¦‚ç‡åˆ†å¸ƒ
- ç½®ä¿¡åº¦é˜ˆå€¼ï¼šscore_th = 0.5
- ä½äºé˜ˆå€¼è¿”å›ç±»åˆ«0ï¼ˆStopï¼‰

---

## ğŸ“Š æ•°æ®æµç¨‹

### 1. å…³é”®ç‚¹æ•°æ®æµ

```
åŸå§‹å›¾åƒ (640x480)
    â†“
MediaPipeæ£€æµ‹
    â†“
21ä¸ªå…³é”®ç‚¹ [(x1,y1), (x2,y2), ..., (x21,y21)]
    â†“
è½¬æ¢ä¸ºç›¸å¯¹åæ ‡ï¼ˆä»¥æ‰‹è…•ä¸ºåŸºå‡†ï¼‰
    â†“
å±•å¹³ä¸ºåˆ—è¡¨ [x1,y1,x2,y2,...,x21,y21]
    â†“
å½’ä¸€åŒ–ï¼ˆé™¤ä»¥æœ€å¤§ç»å¯¹å€¼ï¼‰
    â†“
42ç»´å½’ä¸€åŒ–å‘é‡ [-1~1ä¹‹é—´]
    â†“
è¾“å…¥åˆ°é™æ€æ‰‹åŠ¿åˆ†ç±»å™¨
    â†“
è¾“å‡ºç±»åˆ«ç¼–å·
```

### 2. è½¨è¿¹æ•°æ®æµ

```
æŒ‡å°–åæ ‡ (x, y)
    â†“
æ·»åŠ åˆ°åŒç«¯é˜Ÿåˆ—ï¼ˆmaxlen=16ï¼‰
    â†“
é˜Ÿåˆ—æ»¡æ—¶è§¦å‘å¤„ç†
    â†“
è½¬æ¢ä¸ºç›¸å¯¹åæ ‡ï¼ˆç›¸å¯¹äºç¬¬ä¸€ä¸ªç‚¹ï¼‰
    â†“
å½’ä¸€åŒ–ï¼ˆé™¤ä»¥å›¾åƒå°ºå¯¸ï¼‰
    â†“
å±•å¹³ä¸º32ç»´å‘é‡
    â†“
è¾“å…¥åˆ°åŠ¨æ€æ‰‹åŠ¿åˆ†ç±»å™¨
    â†“
è¾“å‡ºç±»åˆ«ç¼–å·ï¼ˆå¸¦ç½®ä¿¡åº¦è¿‡æ»¤ï¼‰
```

### 3. CSVæ•°æ®æ ¼å¼

**é™æ€æ‰‹åŠ¿æ•°æ®ï¼ˆkeypoint.csvï¼‰**ï¼š
```csv
ç±»åˆ«,x1,y1,x2,y2,...,x21,y21
0,0.1,0.2,0.15,0.25,...,0.9,0.95
1,0.05,0.1,0.08,0.12,...,0.85,0.90
2,0.12,0.18,0.16,0.22,...,0.88,0.92
```

**åŠ¨æ€è½¨è¿¹æ•°æ®ï¼ˆpoint_history.csvï¼‰**ï¼š
```csv
ç±»åˆ«,x1,y1,x2,y2,...,x16,y16
0,0.0,0.0,0.0,0.0,...,0.0,0.0
1,0.01,0.02,0.03,0.05,...,0.15,0.18
2,-0.01,-0.02,-0.03,-0.05,...,-0.15,-0.18
```

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### ç¯å¢ƒé…ç½®

1. **å®‰è£…ä¾èµ–**ï¼š

```bash
pip install -r requirements.txt
```

2. **éªŒè¯å®‰è£…**ï¼š

```bash
python -c "import mediapipe; import tensorflow; import cv2; print('OK')"
```

---

### åŸºæœ¬ä½¿ç”¨

#### 1. è¿è¡Œå®æ—¶è¯†åˆ«

```bash
# ä½¿ç”¨é»˜è®¤æ‘„åƒå¤´ï¼ˆè®¾å¤‡0ï¼‰
python app.py

# æŒ‡å®šæ‘„åƒå¤´è®¾å¤‡
python app.py --device 1

# è‡ªå®šä¹‰åˆ†è¾¨ç‡
python app.py --width 1280 --height 720

# è°ƒæ•´æ£€æµ‹çµæ•åº¦
python app.py --min_detection_confidence 0.8 --min_tracking_confidence 0.7
```

**å‘½ä»¤è¡Œå‚æ•°**ï¼š

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--device` | æ‘„åƒå¤´è®¾å¤‡ç¼–å· | 0 |
| `--width` | å›¾åƒå®½åº¦ | 960 |
| `--height` | å›¾åƒé«˜åº¦ | 540 |
| `--use_static_image_mode` | é™æ€å›¾åƒæ¨¡å¼ï¼ˆä¸è·Ÿè¸ªï¼‰ | False |
| `--min_detection_confidence` | æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼ | 0.7 |
| `--min_tracking_confidence` | è·Ÿè¸ªç½®ä¿¡åº¦é˜ˆå€¼ | 0.5 |

---

#### 2. é‡‡é›†è®­ç»ƒæ•°æ®

**é‡‡é›†é™æ€æ‰‹åŠ¿æ•°æ®**ï¼š

```
1. è¿è¡Œ python app.py
2. æŒ‰ 'k' é”®è¿›å…¥é™æ€æ‰‹åŠ¿é‡‡é›†æ¨¡å¼
3. æŒ‰ '0'-'9' é€‰æ‹©æ‰‹åŠ¿ç±»åˆ«
4. åšå‡ºæ‰‹åŠ¿ï¼Œç¨‹åºè‡ªåŠ¨é‡‡é›†æ•°æ®
5. æ•°æ®ä¿å­˜åˆ° model/keypoint_classifier/keypoint.csv
6. æŒ‰ 'n' è¿”å›æ­£å¸¸æ¨¡å¼
```

**é‡‡é›†åŠ¨æ€è½¨è¿¹æ•°æ®**ï¼š

```
1. è¿è¡Œ python app.py
2. æŒ‰ 'h' é”®è¿›å…¥è½¨è¿¹é‡‡é›†æ¨¡å¼
3. æŒ‰ '0'-'9' é€‰æ‹©è½¨è¿¹ç±»åˆ«
4. åš"æŒ‡å‘"æ‰‹åŠ¿å¹¶ç§»åŠ¨
5. æ•°æ®ä¿å­˜åˆ° model/point_history_classifier/point_history.csv
6. æŒ‰ 'n' è¿”å›æ­£å¸¸æ¨¡å¼
```

**æ•°æ®é‡‡é›†æŠ€å·§**ï¼š
- æ¯ä¸ªç±»åˆ«é‡‡é›† 500-1000 ä¸ªæ ·æœ¬
- ä»ä¸åŒè§’åº¦ã€ä¸åŒå…‰ç…§æ¡ä»¶é‡‡é›†
- ä¿æŒæ‰‹åœ¨æ‘„åƒå¤´è§†é‡å†…
- åŠ¨ä½œè¦è‡ªç„¶æµç•…

---

#### 3. è®­ç»ƒæ¨¡å‹

**è®­ç»ƒé™æ€æ‰‹åŠ¿æ¨¡å‹**ï¼š

```bash
# åœ¨ Jupyter Notebook ä¸­æ‰“å¼€
jupyter notebook keypoint_classification.ipynb

# æˆ–ä½¿ç”¨ VSCode æ‰“å¼€ .ipynb æ–‡ä»¶

# æŒ‰é¡ºåºæ‰§è¡Œæ‰€æœ‰å•å…ƒæ ¼ï¼š
# 1. å¯¼å…¥åº“
# 2. åŠ è½½æ•°æ®
# 3. æ„å»ºæ¨¡å‹
# 4. è®­ç»ƒæ¨¡å‹
# 5. è¯„ä¼°æ¨¡å‹
# 6. è½¬æ¢ä¸º TFLite
```

**è®­ç»ƒåŠ¨æ€è½¨è¿¹æ¨¡å‹**ï¼š

```bash
# æ‰“å¼€ point_history_classification.ipynb
# æ‰§è¡Œæµç¨‹åŒä¸Š

# æ³¨æ„ï¼šå¯é€‰æ‹© LSTM æˆ– MLP æ¨¡å‹
use_lstm = False  # MLPæ›´å¿«ï¼Œæ¨è
use_lstm = True   # LSTMæ›´å‡†ï¼Œä½†æ…¢
```

**è®­ç»ƒå‚æ•°è°ƒæ•´**ï¼š

```python
# åœ¨ notebook ä¸­å¯ä»¥è°ƒæ•´çš„å‚æ•°

# è®­ç»ƒè½®æ•°ï¼ˆæ—©åœæœºåˆ¶ä¼šè‡ªåŠ¨åœæ­¢ï¼‰
epochs = 1000

# æ‰¹æ¬¡å¤§å°ï¼ˆæ ¹æ®æ˜¾å­˜è°ƒæ•´ï¼‰
batch_size = 128

# æ—©åœè€å¿ƒå€¼ï¼ˆè¿ç»­Nä¸ªepochä¸æå‡åˆ™åœæ­¢ï¼‰
patience = 20

# Dropoutæ¯”ä¾‹ï¼ˆé˜²æ­¢è¿‡æ‹Ÿåˆï¼‰
dropout_rate = 0.4

# å­¦ä¹ ç‡ä¼˜åŒ–å™¨
optimizer = 'adam'  # æ¨è
# optimizer = 'sgd'  # ä¼ ç»Ÿæ–¹æ³•
```

---

#### 4. æ·»åŠ æ–°æ‰‹åŠ¿

**æ­¥éª¤**ï¼š

1. **ä¿®æ”¹ç±»åˆ«æ•°é‡**ï¼š

```python
# åœ¨ keypoint_classification.ipynb ä¸­
NUM_CLASSES = 4  # ä»3æ”¹ä¸º4ï¼ˆæ·»åŠ ä¸€ä¸ªæ–°ç±»åˆ«ï¼‰
```

2. **æ›´æ–°æ ‡ç­¾æ–‡ä»¶**ï¼š

```csv
# model/keypoint_classifier/keypoint_classifier_label.csv
Open
Close
Pointer
NewGesture  # æ·»åŠ æ–°ç±»åˆ«åç§°
```

3. **é‡‡é›†æ•°æ®**ï¼š

```
è¿è¡Œ app.py
æŒ‰ 'k' è¿›å…¥é‡‡é›†æ¨¡å¼
æŒ‰ '3' é€‰æ‹©æ–°ç±»åˆ«ï¼ˆç¼–å·ä»0å¼€å§‹ï¼‰
åšå‡ºæ–°æ‰‹åŠ¿å¹¶é‡‡é›†æ•°æ®
```

4. **é‡æ–°è®­ç»ƒæ¨¡å‹**ï¼š

```
æ‰“å¼€ keypoint_classification.ipynb
æ‰§è¡Œæ‰€æœ‰å•å…ƒæ ¼
ç”Ÿæˆæ–°çš„ .tflite æ–‡ä»¶
```

5. **æµ‹è¯•æ–°æ‰‹åŠ¿**ï¼š

```
è¿è¡Œ app.py
åšå‡ºæ–°æ‰‹åŠ¿ï¼ŒæŸ¥çœ‹è¯†åˆ«ç»“æœ
```

---

## ğŸ“š æ¨¡å‹è®­ç»ƒ

### è®­ç»ƒæ•°æ®è¦æ±‚

**é™æ€æ‰‹åŠ¿**ï¼š
- æ¯ä¸ªç±»åˆ«ï¼š500-1000ä¸ªæ ·æœ¬
- æ€»æ ·æœ¬æ•°ï¼š1500-3000ï¼ˆ3ä¸ªç±»åˆ«ï¼‰
- æ•°æ®åˆ†å¸ƒï¼šè®­ç»ƒé›†75%ï¼Œæµ‹è¯•é›†25%

**åŠ¨æ€è½¨è¿¹**ï¼š
- æ¯ä¸ªç±»åˆ«ï¼š300-500ä¸ªæ ·æœ¬
- æ€»æ ·æœ¬æ•°ï¼š1200-2000ï¼ˆ4ä¸ªç±»åˆ«ï¼‰
- é‡‡é›†è¦æ±‚ï¼šå®Œæ•´çš„16å¸§è½¨è¿¹

---

### è®­ç»ƒæŠ€å·§

1. **æ•°æ®å¢å¼º**ï¼ˆå¯é€‰ï¼‰ï¼š

```python
# åœ¨ notebook ä¸­æ·»åŠ æ•°æ®å¢å¼º
from tensorflow.keras.layers import RandomRotation, RandomFlip

# æ·»åŠ åˆ°æ¨¡å‹å¼€å¤´
data_augmentation = tf.keras.Sequential([
    RandomRotation(0.1),  # æ—‹è½¬Â±10%
])
```

2. **è°ƒæ•´æ¨¡å‹ç»“æ„**ï¼š

```python
# å¢åŠ æ¨¡å‹å®¹é‡ï¼ˆå¦‚æœæ•°æ®é‡å¤§ï¼‰
model = Sequential([
    Dense(40, activation='relu'),  # å¢åŠ åˆ°40ä¸ªç¥ç»å…ƒ
    Dropout(0.3),
    Dense(20, activation='relu'),
    Dropout(0.3),
    Dense(NUM_CLASSES, activation='softmax')
])
```

3. **å­¦ä¹ ç‡è°ƒæ•´**ï¼š

```python
# ä½¿ç”¨å­¦ä¹ ç‡è¡°å‡
from tensorflow.keras.callbacks import ReduceLROnPlateau

lr_callback = ReduceLROnPlateau(
    monitor='val_loss',
    factor=0.5,
    patience=5,
    min_lr=1e-6
)

model.fit(..., callbacks=[..., lr_callback])
```

---

### æ¨¡å‹è¯„ä¼°æŒ‡æ ‡

**å…³æ³¨æŒ‡æ ‡**ï¼š

1. **å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰**ï¼š
   - è®­ç»ƒé›†ï¼š>95%
   - éªŒè¯é›†ï¼š>90%

2. **æŸå¤±å€¼ï¼ˆLossï¼‰**ï¼š
   - è®­ç»ƒé›†å’ŒéªŒè¯é›†æ›²çº¿åº”è¯¥æ¥è¿‘
   - éªŒè¯é›†æŸå¤±ä¸åº”æŒç»­ä¸Šå‡ï¼ˆè¿‡æ‹Ÿåˆï¼‰

3. **æ··æ·†çŸ©é˜µ**ï¼š
   - å¯¹è§’çº¿å€¼åº”è¯¥é«˜ï¼ˆæ­£ç¡®åˆ†ç±»ï¼‰
   - éå¯¹è§’çº¿å€¼åº”è¯¥ä½ï¼ˆé”™è¯¯åˆ†ç±»ï¼‰

4. **å„ç±»åˆ«æŒ‡æ ‡**ï¼š
   - Precisionï¼ˆç²¾ç¡®ç‡ï¼‰: >0.85
   - Recallï¼ˆå¬å›ç‡ï¼‰: >0.85
   - F1-score: >0.85

---

## ğŸ·ï¸ æ‰‹åŠ¿ç±»åˆ«

### é™æ€æ‰‹åŠ¿ï¼ˆ3ç±»ï¼‰

| ç¼–å· | åç§° | æè¿° | ç”¨é€” |
|------|------|------|------|
| 0 | Open | äº”æŒ‡å¼ å¼€ | é€šç”¨æ‰‹åŠ¿ |
| 1 | Close | æ¡æ‹³ | é€‰æ‹©/ç¡®è®¤ |
| 2 | Pointer | é£ŸæŒ‡ä¼¸å‡º | æŒ‡å‘/æ¿€æ´»è½¨è¿¹è¿½è¸ª |

---

### åŠ¨æ€è½¨è¿¹ï¼ˆ4ç±»ï¼‰

| ç¼–å· | åç§° | æè¿° | è§¦å‘æ¡ä»¶ |
|------|------|------|----------|
| 0 | Stop | æ— ç§»åŠ¨ | é»˜è®¤çŠ¶æ€ |
| 1 | Clockwise | é¡ºæ—¶é’ˆæ—‹è½¬ | æ£€æµ‹åˆ°Pointeræ‰‹åŠ¿æ—¶ |
| 2 | Counter Clockwise | é€†æ—¶é’ˆæ—‹è½¬ | æ£€æµ‹åˆ°Pointeræ‰‹åŠ¿æ—¶ |
| 3 | Move | ç›´çº¿ç§»åŠ¨ | æ£€æµ‹åˆ°Pointeræ‰‹åŠ¿æ—¶ |

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. æé«˜FPS

**æ–¹æ³•**ï¼š

```python
# é™ä½åˆ†è¾¨ç‡
python app.py --width 640 --height 480

# å‡å°‘MediaPipeæ£€æµ‹æ•°é‡
max_num_hands=1  # åªæ£€æµ‹ä¸€åªæ‰‹

# ä½¿ç”¨é™æ€å›¾åƒæ¨¡å¼ï¼ˆä¸è·Ÿè¸ªï¼‰
python app.py --use_static_image_mode
```

---

### 2. æé«˜å‡†ç¡®ç‡

**æ–¹æ³•**ï¼š

```python
# æé«˜æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼
python app.py --min_detection_confidence 0.8

# å¢åŠ è®­ç»ƒæ•°æ®é‡
# ä½¿ç”¨æ•°æ®å¢å¼º
# è°ƒæ•´æ¨¡å‹ç»“æ„
```

---

### 3. å‡å°‘è¯¯è¯†åˆ«

**æ–¹æ³•**ï¼š

```python
# æé«˜åŠ¨æ€æ‰‹åŠ¿çš„ç½®ä¿¡åº¦é˜ˆå€¼
# åœ¨ point_history_classifier.py ä¸­ä¿®æ”¹
score_th=0.7  # ä»0.5æé«˜åˆ°0.7

# å¢åŠ è½¨è¿¹å†å²é•¿åº¦
history_length = 24  # ä»16å¢åŠ åˆ°24

# ä½¿ç”¨æŠ•ç¥¨æœºåˆ¶
finger_gesture_history = deque(maxlen=history_length)
most_common_fg_id = Counter(finger_gesture_history).most_common()
```

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šæ‘„åƒå¤´æ— æ³•æ‰“å¼€

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# å°è¯•ä¸åŒçš„è®¾å¤‡ç¼–å·
python app.py --device 0
python app.py --device 1
python app.py --device 2

# æ£€æŸ¥æ‘„åƒå¤´æƒé™
# Windows: è®¾ç½® -> éšç§ -> ç›¸æœº
# Mac: ç³»ç»Ÿåå¥½è®¾ç½® -> å®‰å…¨æ€§ä¸éšç§ -> ç›¸æœº
# Linux: æ£€æŸ¥ /dev/video* è®¾å¤‡
```

---

### é—®é¢˜2ï¼šæ£€æµ‹ä¸åˆ°æ‰‹

**è§£å†³æ–¹æ¡ˆ**ï¼š

```python
# é™ä½æ£€æµ‹é˜ˆå€¼
python app.py --min_detection_confidence 0.5

# æ”¹å–„å…‰ç…§æ¡ä»¶
# ç¡®ä¿æ‰‹åœ¨æ‘„åƒå¤´è§†é‡å†…
# èƒŒæ™¯ç®€æ´ï¼Œé¿å…å¤æ‚çº¹ç†
```

---

### é—®é¢˜3ï¼šè¯†åˆ«ä¸å‡†ç¡®

**è§£å†³æ–¹æ¡ˆ**ï¼š

```python
# 1. å¢åŠ è®­ç»ƒæ•°æ®
# 2. é‡æ–°è®­ç»ƒæ¨¡å‹
# 3. è°ƒæ•´æ¨¡å‹å‚æ•°
# 4. ä½¿ç”¨æ•°æ®å¢å¼º
```

---

### é—®é¢˜4ï¼šFPSè¿‡ä½

**è§£å†³æ–¹æ¡ˆ**ï¼š

```python
# 1. é™ä½åˆ†è¾¨ç‡
python app.py --width 640 --height 480

# 2. ä½¿ç”¨GPUåŠ é€Ÿï¼ˆå¦‚æœæœ‰ç‹¬ç«‹æ˜¾å¡ï¼‰
# å®‰è£… tensorflow-gpu

# 3. å‡å°‘æ£€æµ‹æ‰‹æ•°é‡
max_num_hands=1
```

---

## ğŸ“ˆ æ‰©å±•åŠŸèƒ½å»ºè®®

### 1. æ·»åŠ æ‰‹åŠ¿å‘½ä»¤

```python
# å¯ä»¥å°†æ‰‹åŠ¿æ˜ å°„åˆ°ç‰¹å®šå‘½ä»¤
gesture_commands = {
    'Open': 'æ’­æ”¾',
    'Close': 'æš‚åœ',
    'Pointer': 'é€‰æ‹©',
    'Clockwise': 'éŸ³é‡å¢åŠ ',
    'Counter Clockwise': 'éŸ³é‡å‡å°‘',
}
```

---

### 2. å¤šæ‰‹è¯†åˆ«

```python
# ä¿®æ”¹ app.py
hands = mp_hands.Hands(
    max_num_hands=2,  # è¯†åˆ«ä¸¤åªæ‰‹
    ...
)
```

---

### 3. æ‰‹åŠ¿åºåˆ—è¯†åˆ«

```python
# è¯†åˆ«è¿ç»­æ‰‹åŠ¿åºåˆ—
gesture_sequence = deque(maxlen=5)
gesture_sequence.append(current_gesture)

# æ£€æµ‹ç‰¹å®šåºåˆ—
if list(gesture_sequence) == ['Open', 'Close', 'Open', 'Close', 'Pointer']:
    print('è¯†åˆ«åˆ°ç‰¹æ®Šåºåˆ—ï¼')
```

---

### 4. ä¿å­˜è¯†åˆ«ç»“æœ

```python
# è®°å½•è¯†åˆ«æ—¥å¿—
import datetime

with open('gesture_log.txt', 'a') as f:
    timestamp = datetime.datetime.now()
    f.write(f'{timestamp}, {gesture_name}\n')
```

---

## ğŸ“– å‚è€ƒèµ„æ–™

- **MediaPipe Hands**: https://google.github.io/mediapipe/solutions/hands.html
- **TensorFlow Lite**: https://www.tensorflow.org/lite
- **OpenCV**: https://opencv.org/
- **åŸå§‹é¡¹ç›®**: https://github.com/kinivi/hand-gesture-recognition-mediapipe

---

## ğŸ“ æ€»ç»“

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„å®æ—¶æ‰‹åŠ¿è¯†åˆ«ç³»ç»Ÿï¼ŒåŒ…å«ï¼š

âœ… **åŒæ¨¡å‹è¯†åˆ«**ï¼šé™æ€æ‰‹åŠ¿ + åŠ¨æ€è½¨è¿¹
âœ… **å®Œæ•´æµç¨‹**ï¼šæ•°æ®é‡‡é›† â†’ æ¨¡å‹è®­ç»ƒ â†’ å®æ—¶è¯†åˆ«
âœ… **è½»é‡çº§éƒ¨ç½²**ï¼šTFLiteé‡åŒ–æ¨¡å‹ï¼Œé€‚åˆè¾¹ç¼˜è®¾å¤‡
âœ… **å¯æ‰©å±•æ€§**ï¼šæ˜“äºæ·»åŠ æ–°æ‰‹åŠ¿ç±»åˆ«

**æ ¸å¿ƒæŠ€æœ¯ç‚¹**ï¼š
- MediaPipe æ‰‹éƒ¨å…³é”®ç‚¹æ£€æµ‹
- TensorFlow æ·±åº¦å­¦ä¹ æ¨¡å‹
- TFLite æ¨¡å‹é‡åŒ–å’Œéƒ¨ç½²
- å®æ—¶è§†é¢‘æµå¤„ç†

**åº”ç”¨åœºæ™¯**ï¼š
- æ™ºèƒ½å®¶å±…æ§åˆ¶
- æ¸¸æˆäº¤äº’
- æ— æ¥è§¦æ“ä½œ
- æ‰‹è¯­è¯†åˆ«
- è™šæ‹Ÿç°å®/å¢å¼ºç°å®

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025å¹´11æœˆ10æ—¥
**ä½œè€…**: AI Assistant

